<!doctype html><!--
 _____             _    _      _   _             _               
/  __ \           | |  (_)    | | | |           | |              
| /  \/ ___   ___ | | ___  ___| |_| | ___   ___ | | _____ _   _  
| |    / _ \ / _ \| |/ / |/ _ \  _  |/ _ \ / _ \| |/ / _ \ | | | 
| \__/\ (_) | (_) |   <| |  __/ | | | (_) | (_) |   <  __/ |_| | 
 \____/\___/ \___/|_|\_\_|\___\_| |_/\___/ \___/|_|\_\___|\__, | 
                                                           __/ | 
                                                          |___/ 
--><html lang=jp><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,minimum-scale=1"><link rel="shortcut icon" href=/img/favicon.ico><meta name=generator content="Hugo 0.115.4"><title>Nameserverを固定する | CookieHookey</title><meta name=description content><meta name=robots content="index, follow"><link href=/output/css/main.9c89d8bc7508d559c5bf4ad9300463ee3206af75a8c219948b7883799a27fb42.css integrity="sha256-nInYvHUI1VnFv0rZMARj7jIGr3WowhmUi3iDeZon+0I=" rel=stylesheet crossorigin=anonymous><meta property="og:title" content="Nameserverを固定する"><meta property="og:description" content="3rd partyアプリに､自動でnameserverの設定を変更されないようにするために､chattr +iを使用したがエラーが返ってきた｡
chattr +i /etc/resolv.conf chattr: Operation not supported while reading flags on /etc/resolv.conf symlinkには使用できないようだが､リンク先の/run/systemd/resolve/resolv.confに当てはめても同じエラーだった｡
rm /etc/resolv.conf vim /etc/resolv.conf chattr +i /etc/resolv.conf これで､resolv.confはリンクされてない状態になり､仮に3rd partyアプリが変更しても､実際に使用される/run/systemd/resolve/resolv.confには影響がなくなった｡
この他､dhcpcdを用いて､上書きされないようにする方法もあるようだ｡"><meta property="og:type" content="article"><meta property="og:url" content="https://cookiehookey.v6.rocks/make-resolv-conf-immutable/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-03-25T00:00:00+00:00"><meta property="article:modified_time" content="2022-03-25T00:00:00+00:00"><meta itemprop=name content="Nameserverを固定する"><meta itemprop=description content="3rd partyアプリに､自動でnameserverの設定を変更されないようにするために､chattr +iを使用したがエラーが返ってきた｡
chattr +i /etc/resolv.conf chattr: Operation not supported while reading flags on /etc/resolv.conf symlinkには使用できないようだが､リンク先の/run/systemd/resolve/resolv.confに当てはめても同じエラーだった｡
rm /etc/resolv.conf vim /etc/resolv.conf chattr +i /etc/resolv.conf これで､resolv.confはリンクされてない状態になり､仮に3rd partyアプリが変更しても､実際に使用される/run/systemd/resolve/resolv.confには影響がなくなった｡
この他､dhcpcdを用いて､上書きされないようにする方法もあるようだ｡"><meta itemprop=datePublished content="2022-03-25T00:00:00+00:00"><meta itemprop=dateModified content="2022-03-25T00:00:00+00:00"><meta itemprop=wordCount content="26"><meta itemprop=keywords content="DNS,"></head><body class="bg-body subpixel-antialiased flex flex-col h-screen justify-between tracking-wide"><header class="header-cs py-3"><div class="container flex justify-between items-center flex-wrap"><div class="text-lg font-bold"><a href=/>CookieHookey</a></div><div class="flex items-center flex-wrap"><ul class="flex items-center flex-wrap"><li class=ml-4><a class=hover:text-white href=/tags title="Tags page">Tags</a></li></ul></div></div></header><main class="container mb-auto mt-5"><article><header class="text-center py-10"><h1 class="text-5xl pb-2">Nameserverを固定する</h1><div class="flex place-content-center"><time datetime=2022-03-25T00:00:00Z>March 25, 2022</time></div></header><section class=main-article><div class=article-details><div class=article-category><a href=/categories/tech/>Tech</a></div></div><p>3rd partyアプリに､自動でnameserverの設定を変更されないようにするために､chattr +iを使用したがエラーが返ってきた｡</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chattr +i /etc/resolv.conf
</span></span><span style=display:flex><span>chattr: Operation not supported <span style=color:#6ab825;font-weight:700>while</span> reading flags on /etc/resolv.conf
</span></span></code></pre></div><p>symlinkには使用できないようだが､リンク先の/run/systemd/resolve/resolv.confに当てはめても同じエラーだった｡</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rm /etc/resolv.conf
</span></span><span style=display:flex><span>vim /etc/resolv.conf 
</span></span><span style=display:flex><span>chattr +i /etc/resolv.conf
</span></span></code></pre></div><p>これで､resolv.confはリンクされてない状態になり､仮に3rd partyアプリが変更しても､実際に使用される/run/systemd/resolve/resolv.confには影響がなくなった｡</p><p>この他､dhcpcdを用いて､上書きされないようにする方法もあるようだ｡</p></section><section class=tags><ul class="flex list-none mt-20 ml-0 p-0"><span class=mr-3>Tags:</span><li class="mr-3 tags-cs"><a class="px-4 py-2" href=/tags/dns>DNS</a></li></ul></section><div class=mt-20></div></article></main><footer class="container mt-20 py-10"><hr style=margin-bottom:2.5rem;width:105%;margin-left:-2.5%;margin-top:-40px><ul class="flex justify-between items-center flex-wrap"><li><a class=hover:text-white href=/about title="About page">About</a></li><li><a class=hover:text-white href=/contact title="Contact page">Contact</a></li><li><a class=hover:text-white href=/privacy title="Privacy page">Privacy</a></li><li><a class=hover:text-white href=/index.xml title="RSS page">RSS</a></li></ul><div class="py-10 search-box"><form method=get id=ddgSearch action=https://duckduckgo.com/><input type=hidden name=sites value=cookiehookey.neocities.org>
<input class=search-container style=width:90% type=text name=q placeholder="Search the site" aria-label="Search cookiehookey.neocities.org on DuckDuckGo">
<button class=search-btn type=submit>Search</button></form></div><p style=text-align:right;font-size:12px>Powered by Hugo | Theme based on photophobia</p></footer></body></html>